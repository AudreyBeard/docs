---
description: メトリクスを可視化し、軸をカスタマイズし、同じプロット上で複数の線を比較する
slug: /guides/app/features/panels/line-plot
displayed_sidebar: default
---


# 線グラフ

線グラフは、**wandb.log()** を使用してメトリクスを時間経過でプロットするとデフォルトで表示されます。グラフ設定をカスタマイズして、同じグラフに複数の線を比較したり、カスタム軸を計算したり、ラベルを変更したりできます。

![](/images/app_ui/line_plot_example.png)

## 設定

**データ**

* **X軸**: Stepや相対時間などのデフォルトのX軸を選択するか、カスタムX軸を選択します。カスタムX軸を使用したい場合は、`wandb.log()`を使ってy軸を記録する同じ呼び出しでログに記録されていることを確認してください。
  * **Relative Time (Wall)** はプロセスが開始されてからの時計時間ですので、runを開始して1日後に再開して何かをログに記録すると、それは24時間後にプロットされます。
  * **Relative Time (Process)** は実行中のプロセス内の時間ですので、runを開始して10秒後に再開した場合、そのポイントは10秒後にプロットされます。
  * **Wall Time** はグラフ上の最初のrunの開始から経過した分です。
  * **Step** は`wandb.log()`が呼び出されるたびにデフォルトでインクリメントされ、モデルから記録されたトレーニングステップ数を反映します。
* **Y軸**: ログ値からy軸を選択します。メトリクスや時間経過で変化するハイパーパラメーターが含まれます。
* **最小値、最大値、および対数スケール**: 最小値、最大値、対数スケール設定を線グラフのX軸とY軸に適用します。
* **スムージングと異常値の除外**: 線グラフのスムージングを変更したり、異常値を除外してデフォルトの最小および最大スケールを再設定したりします。
* **表示する最大run数**: デフォルトでは10runまで表示されますが、この数を増やして一度により多くの線を表示できます。表示可能なrunが10runを超えている場合は、グラフの上部に「最初の10runを表示」と表示されます。
* **チャートタイプ**: 線グラフ、面積グラフ、パーセンテージ面積グラフを切り替えます。

**X軸設定**
X軸はグラフレベルで設定でき、プロジェクトページやレポートページでもグローバルに設定できます。以下はグローバル設定の例です。

![](/images/app_ui/x_axis_global_settings.png)

:::info
ラインプロット設定で**複数のY軸**を選択して、例えば精度と検証精度のような異なるメトリクスを同じグラフで比較できます。
:::

**グルーピング**

* グルーピングをオンにして、平均値の可視化のための設定を表示します。
* **グループキー**: 列を選択し、その列の同じ値を持つすべてのrunをグループ化します。
* **アグリゲーション**: グラフ上の線の値。選択肢は、グループの平均、中央値、最小値、最大値です。
* **範囲**: グループ化された曲線の背後にある陰影領域の振る舞いを切り替えます。Noneは陰影領域がないことを意味します。Min/Maxはグループ内のポイント全体の範囲をカバーする陰影領域を表示します。Std Devはグループ内の値の標準偏差を表示します。Std Errは陰影領域として標準誤差を表示します。
* **サンプリングされたrun**: 数百のrunが選択されている場合、デフォルトで最初の100のみをサンプリングします。すべてのrunをグルーピング計算に含めることができますが、UIの速度が遅くなる可能性があります。

**凡例**

* **タイトル**: 線グラフのカスタムタイトルを追加し、チャートの上部に表示します。
* **X軸タイトル**: 線グラフのX軸のカスタムタイトルを追加し、チャートの右下に表示します。
* **Y軸タイトル**: 線グラフのY軸のカスタムタイトルを追加し、チャートの左上に表示します。
* **凡例**: 各線のプロットの凡例に表示したいフィールドを選択します。例えば、runの名前や学習率を表示できます。
* **凡例テンプレート**: 完全にカスタマイズ可能なこの強力なテンプレートを使って、線グラフの上部やプロットにマウスを乗せたときに表示される凡例に表示するテキストや変数を指定できます。

![ハイパーパラメーターを表示するように凡例を編集する](/images/app_ui/legend.png)

**式**

* **Y軸の式**: グラフに計算されたメトリクスを追加します。ログに記録されたメトリクスやハイパーパラメーターの設定値を使用してカスタムラインを計算できます。
* **X軸の式**: カスタム式を使用して、計算された値を使用してX軸を再スケールします。便利な変数にはデフォルトのX軸である\*\*\_step\*\*や、サマリー値を参照するための構文`${summary:value}`などがあります。

## プロット上で平均値を可視化する

複数の異なるExperimentsを持っていて、その値の平均をプロットで確認したい場合、テーブル内のグルーピング機能を使用できます。runテーブルの上で「Group」をクリックし、「All」を選択してグラフに平均値を表示します。

以下は平均化前のグラフです：

![](/images/app_ui/demo_precision_lines.png)

以下は、run全体の平均値を見るために線をグループ化した状態です。

![](/images/app_ui/demo_average_precision_lines.png)

## プロット上でNaN値を可視化する

`wandb.log`を使用して、`NaN`値を含むPyTorchテンソルをプロットすることもできます。例えば：

```python
wandb.log({"test": [..., float("nan"), ...]})
```

![](/images/app_ui/visualize_nan.png)

## 1つのチャートで2つのメトリクスを比較する

runをクリックしてrunページに移動します。こちらはStaceyのEstuaryプロジェクトの[例のrun](https://app.wandb.ai/stacey/estuary/runs/9qha4fuu?workspace=user-carey)です。自動生成されたチャートは単一のメトリクスを表示します。

![](@site/static/images/app_ui/visualization_add.png)

ページ右上の**プラス記号**をクリックし、**Line Plot**を選択します。

![](https://downloads.intercomcdn.com/i/o/142936481/d0648728180887c52ab46549/image.png)

**Y変数**フィールドで、比較したい複数のメトリクスを選択します。それらは線グラフに一緒に表示されます。

![](https://downloads.intercomcdn.com/i/o/146033909/899fc05e30795a1d7699dc82/Screen+Shot+2019-09-04+at+9.10.52+AM.png)

## 線グラフの色を変更する

デフォルトのrunの色が比較に役立たないことがあります。このような場合に対処するために、wandbは色を手動で変更できる2つの方法を提供しています。

### runテーブルから

各runには初期化時にデフォルトでランダムな色が与えられます。

![ランダムな色が付与されたrun](/images/app_ui/line_plots_run_table_random_colors.png)

任意の色をクリックすると、色パレットが表示され、手動で希望の色を選択できます。

![色パレット](/images/app_ui/line_plots_run_table_color_palette.png)

### チャート凡例の設定から

チャート凡例の設定からも、runの色を変更できます。

![](/images/app_ui/plot_style_line_plot_legend.png)

## 異なるX軸での可視化

実験にかかった絶対時間や、実験が実行された日を確認したい場合は、X軸を切り替えられます。ステップから相対時間、次にウォールタイムに切り替える例をご覧ください。

![](/images/app_ui/howto_use_relative_time_or_wall_time.gif)

## 面積プロット

線グラフの設定で高度なタブをクリックし、異なるプロットスタイルを選択して、面積プロットやパーセンテージ面積プロットを作成できます。

![](/images/app_ui/line_plots_area_plots.gif)

## ズーム

クリックして長方形をドラッグすると、縦横同時にズームします。これによりX軸およびY軸のズームが変更されます。

![](/images/app_ui/line_plots_zoom.gif)

## チャート凡例の非表示

この簡単なトグルを使って、線グラフの凡例をオフにします：

![](/images/app_ui/demo_hide_legend.gif)