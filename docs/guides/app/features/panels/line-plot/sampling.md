---
displayed_sidebar: default
---


# W&B Line Plots Point aggregation

W&B Line Plots でポイント集約メソッドを使用して、データ可視化の精度とパフォーマンスを向上させましょう。ポイント集約モードには、[ランダムサンプリング](#random-sampling) と [フルフィデリティ](#full-fidelity) の2種類があります。

:::note
デフォルトでは、ワークスペースは **ランダムサンプリング** モードを使用します。フルフィデリティに切り替えると、チャートの設定がユーザーごとに適用されます。
:::

## ランダムサンプリング

パフォーマンスの理由から、ラインプロットメトリクスで1500ポイントを超えるポイントが選択された場合、ポイント集約メソッドはランダムにサンプリングされた1500ポイントを返します。各メトリクスは個別にサンプリングされます。実際にメトリクスがログに記録されているステップのみが考慮されます。ランダムサンプリングは非決定論的にサンプリングするため、このメソッドでは時折重要な外れ値やスパイクを除外することがあります。

### 例: run の履歴にアクセスする

run 中にログ記録されたメトリクスの完全な履歴にアクセスするには、[W&B Run API](../../../../../ref/python/public-api/run.md) を使用できます。以下の例では、特定の run から損失値を取得して処理する方法を示しています：

```python
# W&B API を初期化
run = api.run("l2k2/examples-numpy-boston/i0wt6xua")

# 'Loss' メトリクスの履歴を取得
history = run.scan_history(keys=["Loss"])

# 履歴から損失値を抽出
losses = [row["Loss"] for row in history]
```

## フルフィデリティ

フルフィデリティポイント集約メソッドは、ランダムサンプリングを平均化アプローチに置き換え、外れ値やスパイクなどの重要な視覚的洞察の一貫性を維持します。フルフィデリティモードでは、チャートの各バケット内の最小値と最大値を確実に含めることで、詳細なズーム機能を提供します。

フルフィデリティモードの主な利点には、以下が含まれます：
* 正確なデータ表現: すべての重要な外れ値スパイクを表示します。
* 高密度可視化: 1500ポイントの制限を超えて完全なデータ解像度を維持します。
* 強化されたズーム: サンプリングダウンによるディテールの喪失なしにデータポイントにズームできます。

### フルフィデリティモードを有効にする

1. ワークスペース設定またはパネル設定に移動します。
2. Runs タブを選択します。
3. **Point aggregation method** の下で、**Full fidelity** を選択します。

:::info Line Plot Grouping or Expressions
W&B は、runs で非整列の x 軸値を持つ場合、Line Plot Grouping または Expressions を使用すると、ポイントをバケットでダウンサンプルします。x 軸は200セグメントに分割され、各セグメント内のポイントは平均されます。これらの平均は、メトリクスをグループ化または結合するときのメトリクス値を表します。
:::

:::caution Active feature development
Grouping または Expressions を適用すると、フルフィデリティではなくランダムサンプリングに戻ります。フルフィデリティモードの Run Plots 設定の完全な機能一致を達成するために、パフォーマンスを最適化しながら、Grouping およびカスタム Expressions を有効にする作業を進めています。現在のところ、Grouping または expressions を使用しているパネルはランダムサンプリングを使用します。この機能は高く要求され、ユーザーに価値を提供したため、まだ改善作業中にもかかわらず早期に提供しました。問題があれば support@wandb.com までお問い合わせください。
:::