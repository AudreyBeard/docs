---
displayed_sidebar: default
---


# fastai v1

:::note
このドキュメントはfastai v1用です。
現在のバージョンのfastaiを使用している場合は、[fastaiのページ](../intro.md)を参照してください。
:::

fastai v1を使用したスクリプトでは、モデルのトポロジー、損失、メトリクス、重み、勾配、サンプル予測、最適なトレーニングモデルを自動的にログするコールバックがあります。

```python
import wandb
from wandb.fastai import WandbCallback

wandb.init()

learn = cnn_learner(data, model, callback_fns=WandbCallback)
learn.fit(epochs)
```

要求されたログデータはコールバックコンストラクタを通じて設定可能です。

```python
from functools import partial

learn = cnn_learner(
    data, model, callback_fns=partial(WandbCallback, input_type="images")
)
```

トレーニングを開始する際にのみWandbCallbackを使用することも可能です。この場合、インスタンス化する必要があります。

```python
learn.fit(epochs, callbacks=WandbCallback(learn))
```

その段階でカスタムパラメータを指定することもできます。

```python
learn.fit(epochs, callbacks=WandbCallback(learn, input_type="images"))
```

## サンプルコード

インテグレーションの動作を確認するための例をいくつか用意しています：

**Fastai v1**

* [シンプソンズキャラクターの分類](https://github.com/borisdayma/simpsons-fastai): Fastaiモデルを追跡し比較するシンプルなデモ
* [Fastaiによるセマンティックセグメンテーション](https://github.com/borisdayma/semantic-segmentation): 自動運転車のためのニューラルネットワークの最適化

## オプション

`WandbCallback()` クラスは多くのオプションをサポートしています：

| キーワード引数   | デフォルト  | 説明                                                                                                           |
| ---------------- | ----------- | ------------------------------------------------------------------------------------------------------------- |
| learn            | N/A         | フックするfast.ai learner。                                                                                   |
| save_model       | True        | 各ステップでモデルが改善された場合にモデルを保存します。トレーニング終了時には最適なモデルをロードします。    |
| mode             | auto        | 'min', 'max', 'auto'のいずれか: ステップ間で指定されたトレーニングメトリクスをどのように比較するか。           |
| monitor          | None        | 最適なモデルを保存するためのパフォーマンスを測定するトレーニングメトリクス。Noneはデフォルトで検証損失。      |
| log              | gradients   | "gradients", "parameters", "all", Noneのいずれか。損失とメトリクスは常にログされます。                       |
| input_type       | None        | "images"またはNone。サンプル予測を表示するために使用。                                                        |
| validation_data  | None        | input_typeが設定された場合に使用されるデータ。                                                                |
| predictions      | 36          | input_typeが設定され、validation_dataがNoneの場合に行う予測の数。                                             |
| seed             | 12345       | input_typeが設定され、validation_dataがNoneの場合のサンプル予測のための乱数生成器を初期化。                   |