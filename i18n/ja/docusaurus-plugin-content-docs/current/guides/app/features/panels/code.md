# コードの保存

デフォルトでは、最新のgitコミットハッシュのみを保存します。UIで動的に実験間のコードを比較するために、より多くのコード機能を有効にすることができます。

`wandb`バージョン0.8.28から、`wandb.init()`を呼び出す主要なトレーニングファイルのコードを保存できます。これにより、ダッシュボードに同期され、runページのタブやコード比較パネルに表示されます。デフォルトでコード保存を有効にするには、[設定ページ](https://app.wandb.ai/settings)に進んでください。

![アカウント設定画面です。デフォルトでコードを保存することができます。](/images/app_ui/code_saving.png)

## ライブラリコードの保存

コード保存が有効になっている場合、wandbは`wandb.init()`を呼び出したファイルのコードを保存します。追加のライブラリコードを保存するには、次の2つのオプションがあります。

* `wandb.init()`の呼び出し後に`wandb.run.log_code(".")`を呼び出します
* code\_dirが設定された設定オブジェクトを`wandb.init`に渡します：`wandb.init(settings=wandb.Settings(code_dir="."))`

これにより、現在のディレクトリとすべてのサブディレクトリにあるすべてのPythonソースコードファイルが、[アーティファクト](https://docs.wandb.ai/ref/python/artifact)としてキャプチャされます。保存されるソースコードファイルの種類と場所をより制御するには、[リファレンスドキュメント](https://docs.wandb.ai/ref/python/run#log\_code)をご覧ください。

## コード比較器

ワークスペースやレポートに新しいパネルを追加するために、**+**ボタンをクリックし、コード比較器を選択します。プロジェクト内の任意の2つの実験を比較し、コードの変更された行を正確に確認できます。以下はその例です。

![](/images/app_ui/code_comparer.png)

## Jupyterセッション履歴

**wandb**バージョン0.8.34から、ライブラリはJupyterセッションの保存を行います。Jupyter内で**wandb.init()**を呼び出すと、現在のセッションで実行されたコードの履歴が含まれるJupyterノートブックを自動的に保存するフックが追加されます。このセッション履歴は、codeディレクトリ内のrunsファイルブラウザで見つけることができます。

![](/images/app_ui/jupyter_session_history.png)

このファイルをクリックすると、セッションで実行されたセルと、iPythonのdisplayメソッドを呼び出すことで作成された出力が表示されます。これにより、特定のrunでJupyter内で実行されたコードを正確に確認できます。可能であれば、最も最近のノートブックのバージョンも保存されます。これはcodeディレクトリ内にあります。

![](/images/app_ui/jupyter_session_history_display.png)
## Jupyterの差分表示

最後にもう1つのおまけ機能として、ノートブック間の差分を表示する機能があります。コード比較パネルで生のJSONを表示する代わりに、それぞれのセルを抽出し、変更された行を表示します。当社のプラットフォームにJupyterをより深く統合するための、いくつかのエキサイティングな機能を計画しています。