---
displayed_sidebar: ja
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# LDAP認証を有効にする

W&BサーバーのLDAPサーバーで認証情報を認証します。次のガイドでは、W&Bサーバーの設定方法について説明しています。必須およびオプションの設定について説明し、システム設定UIからLDAP接続を設定する方法についても指示しています。また、アドレス、ベース識別名、属性など、LDAP設定のさまざまな入力に関する情報も提供しています。これらの属性をW&BアプリUIまたは環境変数を使用して指定できます。匿名バインドを設定することも、管理者DNとパスワードでバインドすることもできます。

<!-- :::tip
W&Bチーム管理者として、匿名バインドを設定するか、管理者DNとパスワードでバインドするかを選択できます。
::: -->

:::tip
LDAP認証を有効にし、設定することができるのは、W&B管理者ロールだけです。
:::

## LDAP接続を設定する

<Tabs
  defaultValue="app"
  values={[
    {label: 'W&Bアプリ', value: 'app'},
    {label: '環境変数', value: 'env'},
    
  ]}>
  <TabItem value="app">

1. W&Bアプリに移動します。
2. 右上からプロフィールアイコンを選択します。ドロップダウンから、**システム設定** を選択します。
3. **LDAPクライアントを設定**を切り替えます。
4. 各入力の詳細については、**パラメーターの設定**セクションを参照して、フォームに詳細を追加してください。
5. 設定をテストするには、**設定を更新**をクリックします。これにより、W&Bサーバーとのテストクライアント/接続が確立されます。
6. 接続が確認された場合、**LDAP認証を有効にする** を切り替え、**設定を更新** ボタンを選択します。
<!-- ステップ＃6はなぜ必要ですか？ -->


  </TabItem>
  <TabItem value="env">

以下の環境変数を使用してLDAP接続を設定してください：

| 環境変数                         | 必須     | 例                                     |
| -----------------------------    | -------- | -------------------------------------- |
| `LOCAL_LDAP_ADDRESS`             | はい     | `ldaps://ldap.example.com:636`         |
| `LOCAL_LDAP_BASE_DN`             | はい     | `email=mail,group=gidNumber`           |
| `LOCAL_LDAP_BIND_DN`             | いいえ   | `cn=admin`, `dc=example,dc=org`        |
| `LOCAL_LDAP_BIND_PW`             | いいえ   |                                        |
| `LOCAL_LDAP_ATTRIBUTES`          | はい     | `email=mail`, `group=gidNumber`        |
| `LOCAL_LDAP_TLS_ENABLE`          | いいえ   |                                        |
| `LOCAL_LDAP_GROUP_ALLOW_LIST`    | いいえ   |                                        |
| `LOCAL_LDAP_LOGIN`               | いいえ   |                                        |

各環境変数の定義については [設定パラメータ](#configuration-parameters) セクションを参照してください。わかりやすさのために、環境変数プレフィックス `LOCAL_LDAP` は定義名から省略されています。

  </TabItem>
</Tabs>

## 設定パラメータ

<!-- |環境変数|定義|必須|例|
|-----|-----|-----|-----|
|`LOCAL_LDAP_ADDRESS`| W&BサーバーをホストするVPC内のLDAPサーバーのアドレスです。| はい |`ldaps://ldap.example.com:636`|
|`LOCAL_LDAP_BASE_DN`|検索が開始されるルートパスで、このディレクトリー内でクエリを実行するために必要です。| はい | |
|`LOCAL_LDAP_BIND_DN`|LDAPサーバーに登録された管理ユーザーのパス。LDAPサーバーが認証なしバインディングをサポートしていない場合に必要です。指定された場合、W&BサーバーはこのユーザーとしてLDAPサーバーに接続します。それ以外の場合、W&Bサーバーは匿名バインディングを使用して接続します。| いいえ | `cn=admin`, `dc=example,dc=org`|
|`LOCAL_LDAP_BIND_PW`|管理ユーザーのパスワードで、バインディングを認証するために使用されます。空白のままにすると、W&Bサーバーは匿名バインディングを使用して接続します。| いいえ | |
|`LOCAL_LDAP_ATTRIBUTES`|メールアドレスとグループIDの属性名を、カンマで区切られた文字列値で提供してください。|はい|`email=mail`, `group=gidNumber`|
|`LOCAL_LDAP_TLS_ENABLE`|TLSを有効にします。|いいえ| |
|`LOCAL_LDAP_GROUP_ALLOW_LIST`|グループ許可リスト。|  | |
|`LOCAL_LDAP_LOGIN`|W&BサーバーがLDAPを使って認証するように指示します。`True`か`False`のいずれかに設定してください。LDAP設定をテストするために、これをfalseに設定することもできます。LDAP認証を開始するには、これをtrueに設定します。| いいえ |  | -->
以下の表は、必須およびオプションのLDAP設定を一覧表示し、説明しています。

| 環境変数               | 定義                                                                                                                                                                                                                                                                                  | 必須     |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| `ADDRESS`            | これは、W&BサーバーをホストするVPC内のLDAPサーバーのアドレスです。                                                                                                                                                                                                                       | はい     |
| `BASE_DN`            | このディレクトリーに対するクエリを行うために必要な、検索の開始地点となるルートパス。                                                                                                                                                                                                | はい     |
| `BIND_DN`            | LDAPサーバーに登録されている管理ユーザーのパス。LDAPサーバーが非認証バインディングをサポートしていない場合に必要です。指定されている場合、W&BサーバーはこのユーザーとしてLDAPサーバーに接続します。指定されていない場合、W&Bサーバーは匿名バインディングを使用して接続します。 | いいえ  |
| `BIND_PW`            | 管理ユーザー用のパスワードで、バインディングの認証に使用されます。空白のままにすると、W&Bサーバーは匿名バインディングを使用して接続します。                                                                                                                                  | いいえ  |
| `ATTRIBUTES`         | メールアドレスとグループID属性名をカンマで区切った文字列の値として提供します。                                                                                                                                                                                                      | はい     |
| `TLS_ENABLE`         | TLSを有効にします。                                                                                                                                                                                                                                                                  | いいえ  |
| `GROUP_ALLOW_LIST`   | グループの許可リスト。                                                                                                                                                                                                                                                              | いいえ  |
| `LOGIN`              | W&BサーバーにLDAPを使用して認証するよう指示します。`True`または`False`に設定します。オプションで、LDAP設定をテストするためにこれをfalseに設定できます。LDAP認証を開始するには、これをtrueに設定します。                                                                          | いいえ  |